{"version":3,"sources":["QueryKnowledgeTable.js"],"names":[],"mappings":"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","file":"QueryKnowledgeTable-compiled.js","sourcesContent":["import React from 'react';\nimport styles from './QueryKnowledgeTable.css';\nimport {Pagination} from 'antd';\nimport {hashHistory} from 'dva/router';\nimport DetailsTable from \"./DetailsTable\";\nimport language from '../utils/Languages/index';\nimport {pagination} from \"../utils/modification\";\n\nconst L = language.QueryKnowledge.QueryKnowledgeTable;\n\nclass QueryKnowledgeTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    this.handleDoubleClick = this.handleDoubleClick.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.dispatch({\n      type: 'modelQueryKnowledge/loadGeogId',\n      payload: null,\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.geogId !== '' && this.props.count === 0) {\n      this.props.dispatch({\n        type: 'modelQueryKnowledge/getQueryKnowledgeTableData',\n        payload: {\n          geogId: prevProps.geogId,\n          pageNumber: this.props.pageNumber,\n          luceneKey: (JSON.stringify(this.props.params).indexOf('\"data\":') > -1)\n            ? JSON.parse(this.props.params.data).value : '',\n          sort: (JSON.stringify(this.props.params).indexOf('\"data\":') > -1)\n            ? JSON.parse(this.props.params.data).sort : '',\n        },\n      });\n      this.props.changeCount();\n    }\n  }\n\n  onChange(pageNumber) {\n    this.props.changeCount();\n    this.props.changePageNumber(pageNumber);\n  }\n\n  handleDoubleClick(key) {\n    hashHistory.push('/KnowledgeDetails/' + key);\n  }\n\n  render() {\n    let dataInit = this.props.queryKnowledgeTableData;\n    let data = [];\n    pagination();\n    for (let i = 0; i < dataInit.length; i++) {\n      data[i] = {\n        key: dataInit[i].id,\n        index: (this.props.pageNumber - 1) * 15 + i + 1,\n        knowledgeProperty: dataInit[i].solutionTypeName,\n        knowledgeCaption: dataInit[i].solutionTitle,\n        browseThrough: dataInit[i].browseCount,\n        cite: dataInit[i].citeCount,\n        author: dataInit[i].creator,\n        lastUpdate: dataInit[i].createDate,\n      };\n    }\n\n    const columns = [{\n      title: '',\n      dataIndex: 'index',\n      key: 'index',\n    }, {\n      title: L.columns_KNOWLEDGE_PROPERTY,\n      dataIndex: 'knowledgeProperty',\n      key: 'knowledgeProperty',\n    }, {\n      title: L.columns_KNOWLEDGE_CAPTION,\n      dataIndex: 'knowledgeCaption',\n      key: 'knowledgeCaption',\n    }, {\n      title: L.columns_BROWSE_THROUGH,\n      dataIndex: 'browseThrough',\n      key: 'browseThrough',\n    }, {\n      title: L.columns_CITE,\n      dataIndex: 'cite',\n      key: 'cite',\n    }, {\n      title: L.columns_AUTHOR,\n      dataIndex: 'author',\n      key: 'author',\n    }, {\n      title: L.columns_LAST_UPDATE,\n      dataIndex: 'lastUpdate',\n      key: 'lastUpdate',\n    },];\n    return (\n      <div\n        className={styles.queryKnowledgeTableContainer}\n        style={{\n          marginTop: (document.body.clientWidth <= 768) ? 0 : '',\n        }}\n      >\n        <DetailsTable\n          columns={columns}\n          data={data}\n          tid={'QueryKnowledgeTable'}\n          limit={'15'}\n          handleDoubleClick={this.handleDoubleClick}\n        />\n        <Pagination\n          defaultCurrent={1}\n          total={this.props.totalProperty}\n          className={styles.pagination}\n          showQuickJumper\n          onChange={this.onChange}\n          showTotal={(total, range) => `${range[0]}-${range[1]} of ${total} ${L.showTotal}`}\n          defaultPageSize={15}\n        />\n      </div>\n    )\n  }\n}\n\nexport default QueryKnowledgeTable;\n"]}