{"version":3,"sources":["Announcement.js"],"names":[],"mappings":"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","file":"Announcement-compiled.js","sourcesContent":["import React from 'react';\nimport styles from './Announcement.css';\nimport {Link} from 'dva/router';\nimport AnnouncementModal from \"./AnnouncementModal\";\nimport AnnouncementDetails from \"./AnnouncementDetails\";\nimport language from '../utils/Languages/index';\n\nconst L = language.IndexPageContent.Announcement;\n// const data = [\n//   '自助服务台20170731更新公告',\n//   '8月2日-8月5日网络变更通告',\n//   '8月7日邮箱域名新增入口IP通知',\n//   '8月2日SLB、云数据库服务升级通知',\n//   '8月2日-8月5日网络变更通告',\n//   '8月7日邮箱域名新增入口IP通知',\n//   '8月2日SLB、云数据库服务升级通知',\n// ];\n\nclass Announcement extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      display: 'none',\n      moreDisplay: 'flex',\n      visible: false,\n      detailsVisible: false,\n      keyValue: {},\n    };\n    this.displayModal = this.displayModal.bind(this);\n    this.displayDetailsModal = this.displayDetailsModal.bind(this);\n    this.handleMoreClick = this.handleMoreClick.bind(this);\n    this.handleDoubleClick = this.handleDoubleClick.bind(this);\n    this.handleDoubleClick2 = this.handleDoubleClick2.bind(this);\n  }\n\n  displayModal() {\n    this.setState({\n      visible: false,\n    });\n  }\n\n  displayDetailsModal() {\n    this.setState({\n      detailsVisible: false,\n    });\n  }\n\n  handleMoreClick() {\n    this.setState({\n      visible: true,\n    });\n  }\n\n  handleDoubleClick(key) {\n    this.setState({\n      detailsVisible: true,\n    });\n    this.setState({\n      keyValue: JSON.parse(key),\n    });\n  }\n\n  handleDoubleClick2(key) {\n    this.setState({\n      detailsVisible: true,\n    });\n    this.setState({\n      keyValue: key,\n    });\n    this.props.dispatch({\n      type: 'modelIndexPageContent/getAnnouncementDetailsData',\n      payload: key.id,\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      data: this.props.data,\n    });\n  }\n\n  componentDidMount() {\n    let route = window.location.hash.substr(1);\n    const index = route.indexOf('?');\n    route = route.substr(0, index);\n    if (route === '/') {\n      this.props.dispatch({\n        type: 'modelIndexPageContent/getAnnouncementData',\n        payload: null,\n      })\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.data !== this.state.data || prevProps !== this.props) {\n      if (this.state.data.length === 0) {\n        this.setState({\n          display: 'flex',\n          moreDisplay: 'none',\n        });\n      } else {\n        this.setState({\n          display: 'none',\n          moreDisplay: 'flex',\n        });\n      }\n    }\n  }\n\n\n  render() {\n    const contentItems = this.state.data.map((x, index) =>\n      <div key={index} className={styles.contentItem} onClick={() => this.handleDoubleClick2(x)}>{x.noticeTitle}</div>);\n\n    return (\n      <div className={styles.announcementContainer}>\n        <AnnouncementModal\n          dispatch={this.props.dispatch}\n          loading={this.props.loading}\n          totalProperty={this.props.totalProperty}\n          visible={this.state.visible}\n          displayModal={this.displayModal}\n          data={this.state.data}\n          handleDoubleClick={this.handleDoubleClick}\n        />\n        <AnnouncementDetails\n          dispatch={this.props.dispatch}\n          loading={this.props.loading}\n          announcementDetailsData={this.props.announcementDetailsData}\n          visible={this.state.detailsVisible}\n          displayModal={this.displayDetailsModal}\n          data={this.state.data}\n          keyValue={this.state.keyValue}\n        />\n        <div className={styles.announcementHeader}>{L.announcementHeader}\n          <Link onClick={this.handleMoreClick} activeStyle={{textDecoration: 'none'}}>\n            <div className={styles.more} style={{display: this.state.moreDisplay}}>{L.more}</div>\n          </Link>\n        </div>\n        <div className={styles.announcementContent}>\n          {contentItems}\n          <div className={styles.announcementNoData} style={{display: this.state.display}}>\n            <div className={styles.announcementNoDataMsg}>{L.announcementNoDataMsg}</div>\n            <div className={styles.showMoreContainer}>\n              <div className={styles.showMoreContainerTwo}>\n                <Link onClick={this.handleMoreClick} activeStyle={{textDecoration: 'none'}}>\n                  <div className={styles.showMore}>{L.showMore}</div>\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Announcement;\n"]}