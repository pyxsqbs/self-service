{"version":3,"sources":["RecordTable.js"],"names":[],"mappings":"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","file":"RecordTable-compiled.js","sourcesContent":["import React from 'react';\nimport styles from './RecordTable.css';\nimport {Tooltip} from 'antd';\nimport language from '../utils/Languages/index';\n\nconst L = language.common.RecordTable;\nclass RecordTable extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      columns: [],\n      data: [],\n      columnsWidth: [],\n      display: 'none',\n      borderBottom: 'white 1px solid',\n      paddingBottom: '4px',\n    };\n    this.todoAlignment = this.todoAlignment.bind(this);\n    this.handleDoubleClick = this.handleDoubleClick.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleDoubleClick(key) {\n    if (this.props.handleDoubleClick) {\n      this.props.handleDoubleClick(key);\n    }\n  }\n\n  handleClick(key) {\n    if (this.props.handleDoubleClick && document.body.clientWidth <= 768) {\n      this.props.handleDoubleClick(key);\n    }\n  }\n\n  componentWillMount() {\n    this.setState({\n      columns: [...this.props.columns],\n      data: [...this.props.data.slice(0, (this.props.limit) ? this.props.limit : 5)],\n    });\n  }\n\n  componentDidMount() {\n    if (this.state.data.length === 0) {\n      this.setState({\n        display: 'flex',\n        borderBottom: '#eeeeee 1px solid',\n        paddingBottom: '10px',\n      })\n    } else {\n      this.setState({\n        display: 'none',\n        borderBottom: 'white 1px solid',\n        paddingBottom: '4px',\n      })\n    }\n    if (document.getElementById(this.props.tid + 'thead').firstChild\n      && document.getElementById(this.props.tid + 'tbody').firstChild) {\n      this.todoAlignment();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      columns: [...nextProps.columns],\n      data: [...nextProps.data.slice(0, (this.props.limit) ? this.props.limit : 5)],\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.data !== this.state.data || prevProps !== this.props) {\n      if (this.state.data.length === 0) {\n        this.setState({\n          display: 'flex',\n          borderBottom: '#eeeeee 1px solid',\n          paddingBottom: '10px',\n        })\n      } else {\n        this.setState({\n          display: 'none',\n          borderBottom: 'white 1px solid',\n          paddingBottom: '4px',\n        })\n      }\n      if (document.getElementById(this.props.tid + 'thead').firstChild\n        && document.getElementById(this.props.tid + 'tbody').firstChild) {\n        this.todoAlignment();\n      }\n    }\n  }\n\n  todoAlignment() {\n    const columnsLength = this.state.columns.length;\n    const dataLength = this.state.data.length;\n    let maxItemLength = [];\n    let tran;\n\n    for (let i = 0; i < columnsLength; i++) {\n      maxItemLength[i] = document\n        .getElementById(this.props.tid + 'thead')\n        .firstChild.childNodes[i].clientWidth;\n    }\n\n    for (let i = 0; i < dataLength; i++) {\n      for (let j = 0; j < columnsLength; j++) {\n        tran = Math.min(200, document\n          .getElementById(this.props.tid + 'tbody')\n          .childNodes[i].firstChild.childNodes[j].clientWidth);\n        tran = Math.max(tran, maxItemLength[j]);\n        maxItemLength[j] = tran;\n      }\n    }\n\n    this.setState({\n      columnsWidth: [...maxItemLength],\n    });\n  }\n\n  render() {\n    const theadItems = this.state.columns.map((x, index) =>\n      <div className={styles.theadTh} key={x.key}\n           style={{width: this.state.columnsWidth[index]}}>{x.title}</div>\n    );\n\n    const tbodyItems = this.state.data.map(x =>\n      <div className={styles.tbodyTrContainer} key={x.key}>\n        <div\n          className={styles.tbodyTr}\n          onDoubleClick={() => (this.handleDoubleClick(x.key))}\n          onClick={() => (this.handleClick(x.key))}\n        >\n          {this.state.columns.map((y, index) =>\n            <Tooltip title={x[y.dataIndex]} key={x.key + '-' + y.dataIndex}>\n              <div className={styles.tbodyTh}\n                   style={{width: (this.state.columnsWidth[index]) ? this.state.columnsWidth[index] + 1 : undefined}}>\n                {x[y.dataIndex]}\n              </div>\n            </Tooltip>\n          )}\n        </div>\n      </div>\n    );\n\n    return (\n      <div className={styles.recordTableContainer}>\n        <div className={styles.tableCanvas}>\n          <div className={styles.theadStyle} style={{borderBottom: this.state.borderBottom}}\n               id={this.props.tid + 'thead'}>\n            <div className={styles.theadTr} style={{paddingBottom: this.state.paddingBottom}}>\n              {theadItems}\n            </div>\n          </div>\n          <div className={styles.tbodyStyle} id={this.props.tid + 'tbody'}>{tbodyItems}</div>\n          <div\n            style={{\n              display: this.state.display,\n              paddingTop: (this.props.paddingTop) ? this.props.paddingTop : '15.5%',\n            }}\n            className={styles.tableNodata}\n          >\n            <div className={styles.icInfo}/>\n            {L.icInfo}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default RecordTable;\n"]}