{"version":3,"sources":["model-NewRequest.js"],"names":[],"mappings":"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","file":"model-NewRequest-compiled.js","sourcesContent":["import {\n  rmFile,\n  loadUserMsg,\n  postDepartmentName,\n  postClassification,\n  postWorkOrder,\n} from '../services/service-NewRequest'\nimport {hashHistory} from 'dva/router';\nimport {notification} from 'antd';\n\nexport default {\n\n  namespace: 'modelNewRequest',\n\n  state: {\n    userMsg: {\n      data: {\n        reqDeptName: null,\n        reqEmail: null,\n        reqMobile: null,\n        reqName: null,\n        reqNo: null,\n        reqUsername: null,\n      },\n    },\n    departmentName: [],\n    classification: [],\n  },\n\n  reducers: {\n    initUserMsg(state, {payload}) {\n      Object.assign(state.userMsg, payload);\n      return Object.assign({}, state);\n    },\n    initDepartmentName(state, {payload}) {\n      Object.assign(state.departmentName, payload);\n      return Object.assign({}, state);\n    },\n    initClassification(state, {payload}) {\n      Object.assign(state.classification, payload);\n      return Object.assign({}, state);\n    },\n    INIT(state, {payload}) {\n      return Object.assign({}, {\n        userMsg: {\n          data: {\n            reqDeptName: null,\n            reqEmail: null,\n            reqMobile: null,\n            reqName: null,\n            reqNo: null,\n            reqUsername: null,\n          },\n        },\n        departmentName: [],\n        classification: [],\n      });\n    },\n  },\n\n  effects: {\n    * removeFile({payload}, {call, put, select}) {\n      const result = yield call(rmFile, payload);\n      if (!result.data.success) {\n        alert('删除上传文件错误');\n      }\n    },\n    * loadUserMessage({payload}, {call, put, select}) {\n      const result = yield call(loadUserMsg);\n      if (JSON.stringify(result).indexOf('\"err\":') === -1 && JSON.stringify(result).indexOf('\"error\":') === -1) {\n        yield put({type: 'initUserMsg', payload: result.data});\n      }\n    },\n    * loadDepartmentName({payload}, {call, put, select}) {\n      const result = yield call(postDepartmentName);\n      if (JSON.stringify(result).indexOf('\"err\":') === -1 && JSON.stringify(result).indexOf('\"error\":') === -1) {\n        yield put({type: 'initDepartmentName', payload: result.data});\n      }\n    },\n    * loadClassification({payload}, {call, put, select}) {\n      const result = yield call(postClassification);\n      if (JSON.stringify(result).indexOf('\"err\":') === -1 && JSON.stringify(result).indexOf('\"error\":') === -1) {\n        yield put({type: 'initClassification', payload: result.data});\n      }\n    },\n    * submitWorkOrder({payload}, {call, put, select}) {\n      const result = yield call(postWorkOrder, payload);\n      const notificationConfig = function (msg, type, des) {\n        notification[type]({\n          message: msg,\n          placement: 'topLeft',\n          description: (des) ? des : '',\n        });\n      };\n      if (JSON.stringify(result).indexOf('\"err\":') === -1 && JSON.stringify(result).indexOf('\"error\":') === -1) {\n        notificationConfig('提交成功', 'success');\n        hashHistory.push('/RequestDetails/' + result.data.data.id);\n      } else {\n        notificationConfig('提交失败', 'error', result.data.message);\n        hashHistory.push('/NewRequest');\n      }\n    }\n  },\n\n  subscriptions: {},\n};\n"]}