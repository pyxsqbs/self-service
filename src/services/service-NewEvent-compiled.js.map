{"version":3,"sources":["service-NewEvent.js"],"names":[],"mappings":"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","file":"service-NewEvent-compiled.js","sourcesContent":["import request from '../utils/request';\nimport api from '../utils/api';\n\nlet moment = require('moment');\n\nexport async function rmFile(payload) {\n  const id = payload;\n  let formData = new FormData();\n  formData.append('id', id);\n  formData.append('isRecord', 0);\n  formData.append('ojbCode', '');\n  return request(api + '/systemFileInfoAction/remove', {\n    method: 'POST',\n    body: formData,\n    credentials: 'include',\n    headers: {\n      channel: 'm',\n    }\n  });\n}\n\nexport async function loadUserMsg() {\n  return request(api + '/systemUserAction/loadCurrentRequester', {\n    method: 'POST',\n    credentials: 'include',\n    headers: {\n      channel: 'm',\n    }\n  });\n}\n\nexport async function postDepartmentName() {\n  let formData = new FormData();\n  formData.append('enabCode', 1);\n  return request(api + '/systemOrgAction/listTree', {\n    method: 'POST',\n    body: formData,\n    credentials: 'include',\n    headers: {\n      channel: 'm',\n    }\n  });\n}\n\nexport async function postBelongProject() {\n  return request(api + '/itsmProjectInfoAction/listTree', {\n    method: 'POST',\n    credentials: 'include',\n    headers: {\n      channel: 'm',\n    }\n  });\n}\n\nexport async function postEventProperty() {\n  let formData = new FormData();\n  formData.append('dictType', 'ITSM_INC_TYPE');\n  return request(api + '/systemDictAction/dictListForValueType', {\n    method: 'POST',\n    body: formData,\n    credentials: 'include',\n    headers: {\n      channel: 'm',\n    }\n  });\n}\n\nexport async function postClassification() {\n  let formData = new FormData();\n  formData.append('flowCode', 'INCIDENT');\n  return request(api + '/assortAction/listTreeNew', {\n    method: 'POST',\n    body: formData,\n    credentials: 'include',\n    headers: {\n      channel: 'm',\n    }\n  });\n}\n\nexport async function postEnterprise() {\n  let formData = new FormData();\n  formData.append('flowCode', 'INCIDENT');\n  return request(api + '/itsmGeogAction/listTree', {\n    method: 'POST',\n    body: formData,\n    credentials: 'include',\n    headers: {\n      channel: 'm',\n    }\n  });\n}\n\nexport async function postWorkOrder(payload) {\n  const {\n    // belongProject,todo:所属项目接口失败\n    classification,\n    departmentName,\n    detail,\n    email,\n    eventProperty,\n    occurrenceTime,\n    officePhone,\n    otherContact,\n    priorityLevel,\n    requestName,\n    telephone,\n    title,\n    upload,\n    userId,\n    username,\n    enterprise,\n  } = payload;\n  let formData = new FormData();\n  formData.append('incTopic', title);\n  formData.append('incContent', detail);\n  formData.append('incType', (eventProperty) ? eventProperty : '');\n  formData.append('incHappenDate',\n    (occurrenceTime) ?\n      moment(occurrenceTime).format('YYYY-MM-DD HH:mm:ss')\n      : '',\n  );\n  formData.append('flag', 1);\n  formData.append('flowCode', 'INCIDENT');\n  formData.append('geogid', enterprise);\n  formData.append('incClass',\n    (Array.isArray(classification) && classification.length > 0) ?\n      classification[classification.length - 1]\n      : '',\n  );\n  formData.append('incPriLevel', priorityLevel);\n  formData.append('reqAttachments',\n    (Array.isArray(upload) && upload.length > 0) ?\n      upload.map(x => x.response[0].id).join(',')\n      : '',\n  );\n  formData.append('ciIds', '');\n  formData.append('targetInfo', '');\n  formData.append('reqEmail', email);\n  formData.append('reqId', '');\n  formData.append('reqDept', departmentName);\n  formData.append('reqMobile', telephone);\n  formData.append('reqName', requestName);\n  formData.append('reqNo', userId);\n  formData.append('reqOtherConn', otherContact);\n  formData.append('reqPhone', officePhone);\n  formData.append('reqUsername', username);\n  formData.append('effectDegree', '20');\n  formData.append('effectRange', '20');\n  formData.append('incOrigin', '90');\n  return request(api + '/incidentManageAction/addAndProcess', {\n    method: 'POST',\n    body: formData,\n    credentials: 'include',\n    headers: {\n      channel: 'm',\n    }\n  });\n}\n\n"]}