{"version":3,"sources":["IndexPage.js"],"names":[],"mappings":";;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;;;;;;;IAEM,S;;;AACJ,qBAAY,KAAZ,EAAmB;AAAA;;AAAA,sHACX,KADW;;AAEjB,UAAK,cAAL,GAAsB,MAAK,cAAL,CAAoB,IAApB,OAAtB;AAFiB;AAGlB;;;;qCAEgB;AACf,6BAAU,UAAV,EAAuB,uBAAU,UAAV,MAA0B,SAA3B,GAAwC,SAAxC,GAAoD,SAA1E,EAAqF,CAArF;AACD;;;yCAEoB;AAAA;;AACnB,UAAI,uBAAU,UAAV,MAA0B,EAA9B,EAAkC;AAChC,+BAAU,UAAV,EAAsB,SAAtB,EAAiC,CAAjC;AACD;;AAED,UAAI,KAAK,KAAL,CAAW,cAAX,CAA0B,OAA9B,EAAuC;AACrC,+BAAU,SAAV,EAAqB,KAAK,KAAL,CAAW,cAAX,CAA0B,OAA/C,EAAwD,CAAxD;AACD;;AAED,UAAI,uBAAU,SAAV,MAAyB,EAA7B,EAAiC;AAC/B,4BAAY,OAAZ,CAAoB,eAApB;AACD;;AAED,aAAO,gBAAP,CAAwB,YAAxB,EAAsC,YAAM;AAC1C,YAAI,QAAQ,OAAO,QAAP,CAAgB,IAAhB,CAAqB,MAArB,CAA4B,CAA5B,CAAZ;AACA,YAAM,QAAQ,MAAM,OAAN,CAAc,GAAd,CAAd;AACA,gBAAQ,MAAM,MAAN,CAAa,CAAb,EAAgB,KAAhB,CAAR;AACA,YAAM,aAAa,+BAAkB,SAAS,MAA3B,CAAnB;AACA,YAAI,uBAAU,SAAV,MAAyB,EAAzB,IAA+B,KAAK,KAAL,CAAW,UAAX,EAAuB,OAA1D,EAAmE;AACjE,cAAI,UAAU,eAAd,EAA+B;AAC7B,gCAAY,OAAZ,CAAoB,GAApB;AACD;AACF,SAJD,MAIO;AACL,cAAI,UAAU,eAAV,IAA6B,CAAC,OAAK,KAAL,CAAW,cAAX,CAA0B,OAA5D,EAAqE;AACnE,gCAAY,OAAZ,CAAoB,eAApB;AACD;AACF;AACF,OAdD;AAeD;;;2CAEsB;AACrB,aAAO,mBAAP,CAA2B,YAA3B;AACD;;;6BAGQ;AACP,aACE;AAAA;AAAA,UAAK,WAAW,oBAAO,QAAvB;AACE;AACE,oBAAU,KAAK,KAAL,CAAW,QADvB;AAEE,mBAAS,KAAK,KAAL,CAAW,OAAX,CAAmB,MAF9B;AAGE,mBAAS,KAAK,KAAL,CAAW,cAAX,CAA0B,OAHrC;AAIE,0BAAgB,KAAK;AAJvB,UADF;AAOG,aAAK,KAAL,CAAW,QAPd;AAQE,gEAAc,SAAS,KAAK,KAAL,CAAW,OAAX,CAAmB,MAA1C;AARF,OADF;AAYD;;;;EA1DqB,gBAAM,S;;kBA6Df,kBAAQ;AAAA,MAAE,cAAF,QAAE,cAAF;AAAA,MAAkB,OAAlB,QAAkB,OAAlB;AAAA,SAAgC,EAAC,8BAAD,EAAiB,gBAAjB,EAAhC;AAAA,CAAR,EAAoE,SAApE,C","file":"IndexPage-compiled.js","sourcesContent":["import React from 'react';\nimport {connect} from 'dva';\nimport styles from './IndexPage.css';\nimport IndexPageHeader from '../components/IndexPageHeader';\nimport LoadingModal from '../components/LoadingModal';\nimport {hashHistory} from 'dva/router';\nimport {setCookie, getCookie, parseCookieToJson} from '../utils/cookie';\n\nclass IndexPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.changeLanguage = this.changeLanguage.bind(this);\n  }\n\n  changeLanguage() {\n    setCookie('language', (getCookie('language') === 'chinese') ? 'english' : 'chinese', 1);\n  }\n\n  componentWillMount() {\n    if (getCookie('language') === '') {\n      setCookie('language', 'chinese', 1);\n    }\n\n    if (this.props.modelIndexPage.success) {\n      setCookie('success', this.props.modelIndexPage.success, 1);\n    }\n\n    if (getCookie('success') === '') {\n      hashHistory.replace('/loginContent');\n    }\n\n    window.addEventListener('hashchange', () => {\n      let route = window.location.hash.substr(1);\n      const index = route.indexOf('?');\n      route = route.substr(0, index);\n      const cookieJson = parseCookieToJson(document.cookie);\n      if (getCookie('success') !== '' && JSON.parse(cookieJson).success) {\n        if (route === '/loginContent') {\n          hashHistory.replace('/');\n        }\n      } else {\n        if (route !== '/loginContent' && !this.props.modelIndexPage.success) {\n          hashHistory.replace('/loginContent');\n        }\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('hashchange');\n  }\n\n\n  render() {\n    return (\n      <div className={styles.bodyBack}>\n        <IndexPageHeader\n          dispatch={this.props.dispatch}\n          loading={this.props.loading.global}\n          userMsg={this.props.modelIndexPage.userMsg}\n          changeLanguage={this.changeLanguage}\n        />\n        {this.props.children}\n        <LoadingModal loading={this.props.loading.global}/>\n      </div>\n    );\n  }\n}\n\nexport default connect(({modelIndexPage, loading}) => ({modelIndexPage, loading}))(IndexPage);\n"]}