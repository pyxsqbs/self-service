{"version":3,"sources":["service-NewRequest.js"],"names":[],"mappings":"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","file":"service-NewRequest-compiled.js","sourcesContent":["import request from '../utils/request';\nimport api from '../utils/api';\n\nlet moment = require('moment');\n\nexport async function rmFile(payload) {\n  const id = payload;\n  let formData = new FormData();\n  formData.append('id', id);\n  formData.append('isRecord', 0);\n  formData.append('ojbCode', '');\n  return request(api + '/systemFileInfoAction/remove', {\n    method: 'POST',\n    body: formData,\n    credentials: 'include',\n    headers: {\n      channel: 'm',\n    }\n  });\n}\n\nexport async function loadUserMsg() {\n  return request(api + '/systemUserAction/loadCurrentRequester', {\n    method: 'POST',\n    credentials: 'include',\n    headers: {\n      channel: 'm',\n    }\n  });\n}\n\nexport async function postDepartmentName() {\n  let formData = new FormData();\n  formData.append('enabCode', 1);\n  return request(api + '/systemOrgAction/listTree', {\n    method: 'POST',\n    body: formData,\n    credentials: 'include',\n    headers: {\n      channel: 'm',\n    }\n  });\n}\n\nexport async function postClassification() {\n  let formData = new FormData();\n  formData.append('flowCode', 'SERVERREQ');\n  return request(api + '/assortAction/listTreeNew', {\n    method: 'POST',\n    body: formData,\n    credentials: 'include',\n    headers: {\n      channel: 'm',\n    }\n  });\n}\n\nexport async function postWorkOrder(payload) {\n  const {\n    classification,\n    departmentName,\n    detail,\n    email,\n    occurrenceTime,\n    officePhone,\n    otherContact,\n    requestName,\n    telephone,\n    title,\n    upload,\n    userId,\n    username,\n    reqDeptCode,\n  } = payload;\n  let formData = new FormData();\n  formData.append('srmTopic', title);\n  formData.append('srmContent', detail);\n  formData.append('srmOverdueDate',\n    (occurrenceTime) ?\n      moment(occurrenceTime).format('YYYY-MM-DD HH:mm:ss')\n      : '',\n  );\n  formData.append('flag', 1);\n  formData.append('srmClass',\n    (Array.isArray(classification) && classification.length > 0) ?\n      classification[classification.length - 1]\n      : '',\n  );\n  formData.append('reqAttachments',\n    (Array.isArray(upload) && upload.length > 0) ?\n      upload.map(x => x.response[0].id).join(',')\n      : '',\n  );\n  formData.append('ciIds', '');\n  formData.append('targetInfo', '');\n  formData.append('reqEmail', email);\n  formData.append('reqId', '');\n  formData.append('reqDept', departmentName);\n  formData.append('reqDeptCode', reqDeptCode);\n  formData.append('reqMobile', telephone);\n  formData.append('reqName', requestName);\n  formData.append('reqNo', userId);\n  formData.append('reqOtherConn', otherContact);\n  formData.append('reqPhone', officePhone);\n  formData.append('reqUsername', username);\n  formData.append('effectDegree', '20');\n  return request(api + '/itsmSrmInfoAction/addAndProcess', {\n    method: 'POST',\n    body: formData,\n    credentials: 'include',\n    headers: {\n      channel: 'm',\n    }\n  });\n}\n"]}